using MultiPrecision;

using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Xml.Schema;

namespace MultiPrecisionSandbox {

    class Program {

        static void Main(string[] args) {
            const int sets = 16;

            string egamma = "0.577215664901532860606512090082402431042159335939923598805767234884867726777664670936947063291746749514631447249807082480960504014486542836224173997644923536253500333742937337737673942792595258247094916008735203948165670853233151776611528621199501507984793745085705740029921354786146694029604325421519058775535267331399254012967420513754139549111685102807984234877587205038431093997361372553060889331267600172479537836759271351577226102734929139407984301034177717780881549570661075010161916633401522789358679654972520362128792265559536696281763887927268013243101047650596370394739495763890657296792960100901512519595092224350140934987122824794974719564697631850667612906381105182419744486783638086174945516989279230187739107294578155431600500218284409605377243420328547836701517739439870030237033951832869000155819398804270741154222781971652301107356583396734871765049194181230004065469314299929777956930310050308630341856980323108369164002589297089098548682577736428825395492587362959613329857473930237343884707037028441292016641785024873337908056275499843459076164316710314671072237002181074504441866475913480366902553245862544222534518138791243457350136129778227828814894590986384600629316947188714958752549236649352047324364109726827616087759508809512620840454447799229915724829251625127842765965708321461029821461795195795909592270420898962797125536321794887376421066060706598256199010288075612519913751167821764361905705844078357350158005607745793421314498850078641517161519456570617043245075008168705230789093704614306684817916496842549150496724312183783875356489495086845410234060162250851558386723494418788044094077010688379511130787202342639522692097160885690838251137871283682049117892594478486199118529391029309905925526691727446892044386971114717457157457320393520912231608508682755889010945168118101687497547096936667121020630482716589504932731486087494020700674259091824875962137384231144265313502923031751722572216283248838112458957438623987037576628551303314392999540185313414158621278864807611003015211965780068117773763501681838973389663986895793299145638864431037060807817448995795832457941896202604984104392250786046036252772602291968299586098833901378717142269178838195298445607916051972797360475910251099577913351579177225150254929324632502874767794842158405075992904018557645990186269267764372660571176813365590881554810747000062336372528894955463697143301200791308555263959549782302314403914974049474682594732084618524605877669488287953010406349172292185800870677069042792674328444696851497182567809584165449185145753319640633119937382157345087498832556088887352801901915508968855468259245444527728173057301080606177011363773182462924660081277162101867744684959514281790145111948934228834482530753118701860976122462317674977556412461983856401484123587177249554224820161517657994080629683424289057259473926963863383874380547131967642926837249076087507378528370230468650349051203422721743668979284862972908892678977703262462391226188876530057786274360609444360392809770813383693423550858394112670921873441451218780327615050947805546630058684556315245460531511325281889107923149131103234430245093345000307655864874222971770033178453915056694015998849291609114002948690208848538169700955156634705544522176403586293982865813123870132535880062568662692699776773773068322690091608510451500226107180255465928493894927759589754076155993378264824197950641868143788171850885408036799631423954009196438875007890000062799794280988637299259197776504040992203794042761681783715668653066939830916524322705955304176673664011679295901293053744971830800427584863508380804246673509355983232411696921486064989276362443295885487378970148971334353844800289046665090284537689622398304881406273054087959118967057493854432478691480853377026406775808127545873111763647878743073920664201125135272749961754505308558235668306832291767667704103523153503251012465638615670644984713269596933016786613833333344165790060586749710364689517456959718155376407837765018427834599184201599543144904772555230614767016599341639066091205400532215890209134080278225153385289951166545224586918599367122013215014480142423098625460448867256934314887049159304464018916450202240549538629184758629307788935064377159660690960468124370230546570316067999258716667524721940977798018636262563358252627942239325486013269353070138893743692384287893851276474085654865028156306774044220306440375682630910291751457223444105036931771145217088890744641604868870108386231142612844142596095637040061920057933503415524262402620646569354306125852658345219212149777187806958660851633492210483673799459259434037956000219278541837941776020336559467307887983808481631467824149235464914887668336840749289386528186304858982035481862438384817599763584907518079148063494391628470548220075494534898613382723573092219003074009680033766684493250556765493753031811251641055249238407764514984239576201278155232294492885455785382024891894244185709591955820810007157838403962747998581788088886571683069943606073599042106851142791316969959679230082898815609753833805910936034125299865679038956879567345508336290782386263856349074731927527874016655753119011154347001818625697126112012685292312993716140390696511222481661508235364398239662053263332224850519159368269071500431558987180278335384544830910724949805788096171799633716703655418004146466753871958694848333154358333064193592948742095147883234774848141814977687169441364005664515693611652416155573414193542472137306746833384905442662603837278821755270993095814102613697950078646587677160863080446074980280157696267591389779477221433751547082934587912389843305506722347496998494248670672150256927352958506586958899748653556218695804399712516897665416986265386289197754218772193960581700110423641415878081038617210155755192371116004988068229161809773242195832897486922718397919046771654266813889337929603681545793961133962192224543015158063174370840560853641603138498296951856695261282212371693936813032129656193971871020709800794883391019753510430744182344883333179697827733209114332451430508657345750068739147547077757755991846711830858366015943719371844903906177023253656797759674447574751158419574670099734500245442840658502450858564639279124611987909369307201980402930360373883843074216282120163538646622609719895843679943057203014963805083223236582555772453423718773743981833330645466290699331112597372195027464689906545715544030391783541975643431573903488386675054274216183105006055046422354570842739354935905176271747929947239890863297010190561010774269092647523574030463015924344246490083418863085932068552250779091019585889531432879981757098191682931594045300563254331448851735730269825693725346996401344087158010814528786579040866363794507110850510424179769191129261513201031636349808660694862440780066840067169622146371811477726834184664636424273405300313807734961199814686176858546312081631647989379642637383566189383137109832895649052114881340297423888686315431329787657991254542433385634720026812904899495504269808821302672635815324806753879032305742104033014978878675237786070546886147210099263294251088780197028411792240259109146658480925785719278628214766707408786351971425629242786702840770324143756993188324333155900243330476911100924797911800628620221370780062172573290473599439888313927992796939706356762811669405412885908198202383827703548349687973404888829301673677094158465440095486246514610135391349685591204023636187215099298065190586168281530287504275452586053319634325957774788134372393949912438061437544985906860751856314272552556425939670149804142598182378525768294363959656243885206565480710388454639445377019178457187410118622322780252519436265743824225609356769258238774911607377594514014470319022415355911250613817829742126498264161872460631334089192670235979580236584163175567923356621012313358454945905900699842006722602511677438473648243857154071462659456423911271707803063714169263864401005713109589606326496375529567693646894105179520006164520218843534047301824393051488198459307629640444568776241652871620727673186063254080142887457119865730747170188660368797036477085485287167000362292852883746824660588141175404744606167635430373992375659659369670879231677446856931083821078304831591964300214412597022890632031741011493664809529030117163345319179229392424287728378723495699292321360922349472264582437550945153355201176128975173395137178293328715860943866270117918415545872648982513925559437951973178674487699253261794233812999412793986026442451960060543681866467098659443659301543762914869795976949965335272100200209679104394825472441133422448700546376568408667621533736274615912054700862905716982573537052397612312384125643494117894986158285970209710970391963521681225822475627195193827282852091471823753436552540207462030667304769524700944138145617828266631961396735936725726460338849464248947244897848159671530615384671223698712823197847693110571662363732620759597118040151438962317060195857098238139246661352791369563765590486167620512974099831496559786025341012945439986728830062440844018618151175068708876467160979929201776962496330157582925961884948587200229224806062881217787338314588255129395365108819186512004492315498394773147357868897314204731094538146482263210233107943959746285235412957519106355879230019561813129461203015757634015978568175174984237788244737539824745759968677074085455743294240267819384822035409621060607219249908251048540031849631998632215690890976140531071651131293268534985244028644829347059160858699598198890395995591811076413446658814525425658815354502888473997532432780902152256952184414529865083551298398022623826497488181158152503459974991596640098320145200704803555685899730998150310419223850897453732761294717126816530886700547288657792246701782659482726097229034715741403166973107050507829610826072870429126082311974151014735784781010727971124279760284814115163388689690786717577259381524796123789999036661756035882181325467563448309148729626693721988502700188298173017024944214063172651971395062210827645071816639104366832956638073071945432112550536208967832303108517148114928588993628706488755843891300471868467985816555215901392560320613764271562801189710961140023913039340606177848211022171659926595968295889054498964857404122047497354256467184023650467905827485906950473555353118383580896528861588941744162198868042303492438958149736722274951811271453438697499243242138684148483757703310876176713319944263498806721667029837172305713049725638198844365399819479702232754329114444334632521147931884649735946944848095173477094072610914935105185504318885163801800242681763172645895778814658947316219913542179706963929591256038380485858315672725418461469966035190076701117823052799983131869807247821681733898469124905579108670654302562938081094823609111829606689497381976315105153849351755239719285356716392942133652695804910395035184024218719354618144779597003034981595797204306777594944901723142379859747626770780089801189185222292926232972928063147648100119170999353176973089422637402010070933506662278553377221764956942951334221705610681812756961404474958290392860857457388291936508052242861222127546363510513672212582245575077109355482418644081821868065780807997195177094741976777321248237146238439548793726755999117028197060756357666410128135009900870533562005233692960542950925454197352380877261644726537223075682650548450967977189920085489134740739641604941240355532681572462690238393851871880255068492576623874840587602085156822696375959505192472415113351633997915722240096108783927522588221309137090398253602681026714192457656617577459778140687748039272881158381756311947737656076600572646789529799845809862366637288604202210815746224807534447106826682453131467830139795565469446569924798847738725096467623890367941556929458900761452007886853636785881263991895915762004321719963679026988291124135380038262803150403003974901435360072497149221447964375882164985214291391538427340926605654110785900980475485015633962941100687322708858038920938666026698000647372824782041241192417329618876338055648276563436280602243482642752944486680470955821482589864430168812993853864630560323609977312396087029754227094838618748";

            Plot<Pow2.N8>(sets, egamma);
            Plot<Pow2.N16>(sets, egamma);
            Plot<Pow2.N32>(sets, egamma);
            Plot<Pow2.N64>(sets, egamma);
            Plot<Pow2.N128>(sets, egamma);
            Plot<Pow2.N256>(sets, egamma);
            Plot<Pow2.N512>(sets, egamma);
            Plot<Pow2.N1024>(sets, egamma);

            Console.WriteLine("END");
            Console.Read();
        }

        private static void Plot<N>(int sets, string egamma) where N : struct, IConstant {
            MultiPrecision<Plus1<Plus1<N>>> x = egamma;

            Console.WriteLine(x.ToHexcode());

            using (StreamWriter sw = new StreamWriter($"egamma_hex_{default(N).Value}.txt")) {
                sw.WriteLine(x.ToHexcode());

                var xs = x.Mantissa.Reverse().ToArray();

                for (int i = 0, k = 0; i < xs.Length; i += sets) {
                    for (int j = 0; j < sets && k < xs.Length; j++, k++) {
                        sw.Write($"0x{xs[k]:X8}u, ");
                    }

                    sw.Write("\n");
                }

                sw.Flush();

                sw.WriteLine(x);
            }
        }
    }
}
